{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Instalaciones Universales - Diseño</title>
    <style>
        /* ======= ESTILOS GENERALES DE LA PÁGINA ======= */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background: #f8f8f8;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        nav {
            background: #fff;
            padding: 10px 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: none;


NEGOCIO = {
    "nombre": "Instalaciones Universales",
    "direccion": "Plaza Cultural IRCA Jarachina Sur, San Pedro 169, Lomas del Real de Jarachina Sur, 88736 Reynosa, Tamps.",
    "telefono": "899 257 1482",
    "horario": "Lunes a Sábado de 10:00 a.m. a 10:00 p.m.",
    "servicios": "Somos un negocio especializado en instalaciones, reparaciones y soluciones técnicas profesionales."
}

  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        nav .logo img {
            height: 40px;
            width: auto;
            display: block;
        }

        nav .nav-actions {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        nav .nav-actions a, nav .nav-actions button {
            text-decoration: none;
            padding: 10px 15px;
            border-radius: 5px;
            font-weight: bold;
            border: none;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 16px;
        }

        nav .nav-actions button {
            background: #333;
            color: #fff;
        }

        nav .nav-actions a {
            color: #000;
            background: #FFB400;
        }

        nav .nav-actions a:hover, nav .nav-actions button:hover {
            opacity: 0.9;
            transform: translateY(-1px);
        }

        .main-wrapper {
            display: grid;
            grid-template-columns: 220px 1fr;
            flex-grow: 1;
            width: 100%;
        }

        .sidebar {
            background: #000;
            color: #fff;
            padding: 15px 20px;
            border-right: 2px solid #333;
            display: flex;
            flex-direction: column;
            grid-row: 1 / span 2;
            margin: 0;
        }

        .sidebar ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .sidebar ul li {
            margin-bottom: 15px;
        }

        .sidebar ul li a {
            display: block;
            text-decoration: none;
            color: #000;
            background: #FFB400;
            font-size: 16px;
            padding: 10px 5px;
            border-radius: 4px;
            text-align: center;
            font-weight: bold;
            border: 1px solid #FFB400;
            transition: all 0.3s ease;
        }

        .sidebar ul li a:hover {
            background: #e0a300;
            color: #000;
            border-color: #e0a300;
        }

        .welcome-header {
            width: 100%;
            background: #fff;
            text-align: center;
            margin: 0;
            padding: 0 40px 0 40px;
            box-sizing: border-box;
            grid-column: 2 / 3;
            margin-bottom: 30px;
        }

        .welcome-header h2 {
            font-size: 24px;
            color: #333;
            border-top: 3px solid #000000;
            border-bottom: 3px solid #000000;
            padding-top: 10px;
            padding-bottom: 10px;
            margin: 0 auto;
            width: 100%;
            display: block;
            box-sizing: border-box;
        }

        .main-content {
            padding: 0 40px;
            background: #fff;
            grid-column: 2 / 3;
        }

        .account-actions {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 30px;
        }

        .account-actions a {
            text-decoration: none;
            padding: 10px 15px;
            border-radius: 5px;
            font-weight: bold;
            border: 2px solid #333;
            color: #333;
            background: #fff;
            transition: all 0.2s;
        }

        .account-actions a:hover {
            background: #333;
            color: #fff;
        }

        .account-actions a.action-create {
            background: #FFB400;
            color: #000;
            border: 2px solid #FFB400;
        }

        .account-actions a.action-create:hover {
             background: #e0a300;
             color: #000;
             border: 2px solid #e0a300;
        }

        /* --- CAMBIO EN content-grid (3 columnas) --- */
        .content-grid {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr; /* Tres columnas en pantallas grandes */
            gap: 30px;
            margin-bottom: 30px;
        }

        /* --- CONTENEDOR DEL MAPA (Ocupa 3 columnas) --- */
        .map-container {
            margin-top: 10px;
            border: 1px solid #ccc;
            border-radius: 6px;
            overflow: hidden;
            grid-column: 1 / 4;
            margin-bottom: 30px;
        }

        /* --- REDUCCIÓN DE TAMAÑO DE LAS TARJETAS --- */
        .status-card, .why-us-card, .location-card {
            padding: 20px;
            background: #fff;
            border: 1px solid #ccc;
            border-radius: 6px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            min-height: 250px;
            /* Añadido para hacer las tarjetas flex y poder centrar el contenido */
            display: flex;
            flex-direction: column;
        }

        .status-card {
            border-left: 5px solid #333;
            text-align: center;
            justify-content: flex-start; /* Mantiene la imagen arriba */
            align-items: center;
        }

        /* Centrado Vertical en Why Us y Ethics Card */
        .why-us-card, .ethics-card, .location-card {
            /* Nuevo: Centra el contenido verticalmente y lo distribuye */
            justify-content: center;
        }

        /* AJUSTE para TÍTULOS CENTRADOS en las tarjetas */
        .status-card h3, .why-us-card h3, .location-card h3, .ethics-card h3 {
             text-align: center;
        }

        /* AJUSTE para IMAGEN MÁS GRANDE */
        .local-image-direct {
            max-width: 100%;
            height: auto;
            object-fit: cover;
            border-radius: 8px;
            display: block;
            margin: 10px auto 0 auto;
            background-color: #f0f0f0;
            flex-grow: 1;
            max-height: 250px;
        }


        .status-card h3 {
            color: #333;
            font-size: 18px;
            margin-bottom: 10px;
        }

        .status-card .status {
            color: green;
            font-size: 28px;
            font-weight: bold;
        }

        .why-us-card, .location-card {
            padding: 25px;
        }

        .why-us-card h3, .location-card h3 {
            color: #333;
            border-bottom: 2px solid #ccc;
            padding-bottom: 10px;
            margin-bottom: 15px;
        }

        /* Visibilidad de textos: Aumento de tamaño y color a negro */
        .why-us-card p, .ethics-card p {
            color: #000; /* Color negro fuerte */
            font-size: 18px; /* Aumento del tamaño de fuente */
            line-height: 1.6;
        }

        /* Estilos para la imagen y texto de Garantía */
        .warranty-image {
            max-width: 80px;
            height: auto;
            display: block;
            margin: 10px auto 10px auto;
            object-fit: contain;
        }

        .warranty-text {
            text-align: center;
            font-size: 18px;
            font-weight: bold;
            color: #000;
            line-height: 1.4;
            margin-top: 10px;
        }


        /* Estilos específicos para la tarjeta de ubicación */
        .location-card {
            border-left: 5px solid #FFB400;
            grid-column: 1 / 4;
            min-height: 100px;
            margin-bottom: 30px;
        }

        .location-card p {
            font-size: 18px;
            margin-bottom: 8px;
            line-height: 1.4;
            color: #000;
        }

        .location-card strong {
            display: inline;
            margin-top: 0;
            font-size: 18px;
            color: #000;
        }

        .location-card a {
            color: #007bff;
            text-decoration: none;
        }

        .ethics-card {
            grid-column: 1 / 4;
            padding: 25px;
            border: 1px solid #ccc;
            border-radius: 6px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            background: #fff;
            min-height: 100px;
            margin-bottom: 30px;
        }

        .ethics-card h3 {
            color: #333;
            border-bottom: 2px solid #ccc;
            padding-bottom: 10px;
            margin-bottom: 15px;
        }

        footer {
            background: #e0e0e0;
            color: black;
            text-align: center;
            padding: 15px;
            border-top: 5px solid black;
            font-weight: bold;
            font-size: 18px;
            text-transform: uppercase;
        }

        /* MEDIA QUERIES */
        @media (max-width: 1200px) {
             .content-grid {
                grid-template-columns: 1fr 1fr;
            }
             .map-container, .ethics-card, .location-card {
                grid-column: 1 / 3;
            }
        }

        @media (max-width: 900px) {
            .main-wrapper {
                grid-template-columns: 1fr;
            }
            .sidebar {
                grid-row: auto;
                border-right: none;
                border-bottom: 2px solid #333;
            }
            .welcome-header {
                grid-column: 1 / 2;
                margin-left: 0;
                padding: 0 20px;
            }
            .main-content {
                grid-column: 1 / 2;
                padding: 0 20px;
            }
            .content-grid {
                grid-template-columns: 1fr;
            }
            .map-container, .ethics-card, .location-card {
                grid-column: 1 / 2;
            }
        }

        /* ======= ESTILOS DEL WIDGET DE CHAT (FINAL Y CORREGIDO) ======= */
        #chat-window {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 380px;
            height: 500px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.4);
            z-index: 9999;
            font-family: Arial, sans-serif;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            transition: width 0.3s, height 0.3s, right 0.3s, bottom 0.3s, border-radius 0.3s;
        }

        #chat-window.maximized {
            width: 100%;
            height: 100vh;
            bottom: 0;
            right: 0;
            border-radius: 0;
        }

        #chat-header {
            background: black;
            color: white;
            padding: 10px;
            font-weight: bold;
            flex-shrink: 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        #chat-header span {
            flex-grow: 1;
            text-align: center;
            padding-left: 30px;
        }

        #chat-control-btn {
            background: none;
            border: none;
            color: white;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            padding: 0 5px;
            line-height: 1;
            opacity: 0.8;
            transition: opacity 0.2s;
        }
        #chat-control-btn:hover {
            opacity: 1;
        }

        #chat-messages {
            flex-grow: 1;
            padding: 10px;
            overflow-y: auto;
            background-color: #fff;
        }

        .bot-message {
            background: #f0f0f0;
            color: black;
            padding: 8px 10px;
            margin-bottom: 8px;
            border-radius: 8px;
            width: fit-content;
            max-width: 85%;
        }

        .user-message {
            background: #e0f7fa;
            color: black;
            padding: 8px 10px;
            margin-bottom: 8px;
            border-radius: 8px;
            width: fit-content;
            max-width: 85%;
            margin-left: auto;
        }

        #chat-form {
            display: flex;
            padding: 10px;
            gap: 5px;
            background: black;
            flex-shrink: 0;
            margin: 0;
        }

        #chat-input {
            flex: 1;
            padding: 8px;
            border-radius: 0;
            border: none;
            outline: none;
            background: white;
        }

        #chat-send-btn {
            background: #FFD60A;
            color: black;
            padding: 8px 12px;
            border-radius: 0;
            border: none;
            cursor: pointer;
            font-weight: bold;
            transition: background 0.2s;
        }

        #chat-send-btn:hover {
            background: #FFB400;
        }
        .status {
            font-weight: bold; /* Asegura que el texto se vea fuerte */
            transition: color 0.3s ease; /* Transición suave al cambiar de color */
        }

        .status.abierto {
            color: green; /* Color para cuando está ABIERTO */
        }

        .status.cerrado {
            color: red; /* Color para cuando está CERRADO */
        }
        nav, header, .menu, .navbar {
    position: relative;
    z-index: 10;
}

#chat-window, #chat-toggle-btn {
    z-index: 5;
}

.nav-left {
    /* * ✅ Utiliza Flexbox para alinear elementos en una sola fila.
     */
    display: flex;
    align-items: center;
    gap: 10px;
}

/* 2. Estilo Básico para el Logo (Asegura alineación) */
.logo {
    /* Asegura que el logo tenga una línea base consistente */
    display: inline-block;
}

    background-color: #FFB400;
    color: #000;
    font-weight: bold;

}
    </style>
</head>
{% include "local/chat_widget.html" %}
<body>
    <nav>
        <div class="logo">
            <img src="{% static 'img/LOGO.png' %}" alt="Logo de Instalaciones Universales">
        </div>
        {% if user.is_authenticated %}
    <div class="usuario-info">
        Hola, {{ user.first_name|default:user.username }}
    </div>
{% endif %}
        <div class="nav-actions">
            <a href="{%url 'login' %}">Iniciar Sesión</a>
        </div>
    </nav>

    <div class="main-wrapper">
        <div class="sidebar">
            <ul>
                <li><a href="{% url 'mis_solicitudes' %}">Ver mi cuenta</a></li>
                <li><a href="{% url 'servicios' %}" class="action-about">Servicios</a></li>
                <li><a href="{% url 'consulta_personalizada' %}" class="action-about">Consulta a domicilio</a></li>
                <li><a href="{% url 'sobre_nosotros' %}" class="action-about">Sobre nosotros</a></li>
                <li><a href="{% url 'opiniones' %}" class="action-about">Opiniones</a></li>
                <li><a href="{% url 'huella_carbono' %}" class="action-about">Huella de carbono</a></li>
            </ul>
        </div>

        <header class="welcome-header">
            <h2>BIENVENIDO A INSTALACIONES UNIVERSALES</h2>
        </header>

        <div class="main-content">
            <div class="account-actions">
                <a href="{% url 'cuenta' %}" class="action-about">Únete a la comunidad de reparación - Crear Cuenta</a></li>
            </div>

            <div class="content-grid">
                <div class="status-card">
                    <h3>Estado: <span id="estado-tienda" class="status">ABIERTO</span></h3>
                    <img src="{% static 'img/LOCAL.png' %}" alt="Foto del Local Instalaciones Universales" class="local-image-direct">
                </div>
<script>
    // Establece el horario de apertura y cierre (en formato de 24 horas)
    const HORA_APERTURA = 10;   // 9:00 AM
    const HORA_CIERRE = 22;    // 6:00 PM (18:00)

    const DIA_CIERRE_SEMANAL = 0;

    function actualizarEstadoTienda() {
        const estadoSpan = document.getElementById('estado-tienda');

        // Verifica que el elemento exista
        if (!estadoSpan) {
            console.error("Elemento 'estado-tienda' no encontrado.");
            return;
        }

        // Obtiene la hora local del usuario
        const ahora = new Date();
        const horaActual = ahora.getHours();

        if (horaActual >= HORA_APERTURA && horaActual < HORA_CIERRE) {
            // ABIERTO
            estadoSpan.textContent = "ABIERTO";
            estadoSpan.classList.remove('cerrado');
            estadoSpan.classList.add('abierto');
        } else {
            // CERRADO
            estadoSpan.textContent = "CERRADO";
            estadoSpan.classList.remove('abierto');
            estadoSpan.classList.add('cerrado');
        }
    }

    // 1. Ejecutar la función inmediatamente al cargar la página.
    actualizarEstadoTienda();

    // 2. Opcional: Ejecutar la función cada 5 minutos para actualización automática.
    // Esto asegura que el estado cambie automáticamente en el momento exacto de la apertura/cierre.
    setInterval(actualizarEstadoTienda, 300000); // 300,000 ms = 5 minutos
</script>
                <div class="why-us-card">
                    <h3>¿POR QUÉ NOSOTROS?</h3>
                    <p>Somos Instalaciones Universales, su aliado experto y de confianza en el sector de la electrónica. Con una trayectoria ininterrumpida desde el año 2001, contamos con más de dos décadas de experiencia ofreciendo servicios integrales de instalación, mantenimiento y reparación de una amplia gama de equipos electrónicos.</p>
                </div>

                <div class="why-us-card">
                    <h3>GARANTÍA Y SERVICIO</h3>
                    <img src="{% static 'img/garantia.png' %}" alt="Imagen de Garantía" class="warranty-image">
                    <p class="warranty-text">
                        Contamos con garantía de 30 días.<br>
                        Realizamos instalaciones a domicilio.
                    </p>
                </div>
            </div>

            <div class="map-container">
                <iframe
                    src="https://www.google.com/maps/embed?pb=!4v1762738231458!6m8!1m7!1sAk8o-mIaflEUAsFFpIeoNA!2m2!1d26.0414814236558!2d-98.35642321773358!3f38.49423811826334!4f1.1114071767740228!5f0.7820865974627469"
                    width="100%"
                    height="350"
                    style="border:0;"
                    allowfullscreen=""
                    loading="lazy"
                    referrerpolicy="no-referrer-when-downgrade">
                </iframe>
            </div>

            <div class="location-card">
                <h3>DÓNDE NOS UBICAMOS</h3>
                <p><strong>Ubicado en:</strong> "PLAZA CULTURAL IRCA JARACHINA SUR"</p>
                <p><strong>Dirección:</strong> San Pedro 169, Lomas del Real de Jarachina Sur, 88736 Reynosa, Tamps.</p>
                <p><strong>Teléfono:</strong> <a href="tel:8992571482">8992571482</a></p>
                <p><strong>Horario:</strong> Lunes a Sábado de 10:00 a.m. a 10:00 p.m.</p>
            </div>


            <div class="ethics-card">
                <h3>NUESTRO CÓDIGO ÉTICO</h3>
                <p>Trabajamos con honestidad, compromiso y transparencia. Cada proyecto es realizado con responsabilidad y respeto hacia nuestros clientes y su tiempo.</p>
            </div>
        </div>


    <footer>
        DERECHOS RESERVADOS © 2025 INSTALACIONES UNIVERSALES
    </footer>
