<style>
/* ------------------------------------------- */
/* --- ðŸŽ¨ ESTILOS PARA MIS SOLICITUDES (Modernizado) --- */
/* ------------------------------------------- */

/* Contenedor principal */
.solicitudes-container {
    padding: 30px; 
    background-color: #ffffff; 
    border-radius: 16px; 
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08); 
    margin-bottom: 30px;
    max-width: 950px; 
    margin-left: auto;
    margin-right: auto;
    font-family: sans-serif; /* Usaremos una fuente simple si no se carga 'Inter' */
}

/* TÃ­tulo principal */
.solicitudes-container h2 {
    color: #1a1a1a; 
    font-size: 28px;
    font-weight: 800;
    border-bottom: 3px solid #0056b3; 
    padding-bottom: 12px;
    margin-bottom: 25px;
}

/* SubtÃ­tulo de secciÃ³n */
.solicitudes-container h3 {
    color: #495057;
    margin-top: 30px;
    margin-bottom: 20px;
    font-size: 20px;
    font-weight: 600;
}

/* Tabla de Solicitudes */
.solicitud-table {
    width: 100%;
    border-collapse: separate; 
    border-spacing: 0 10px; 
    margin-top: 15px;
    background-color: #ffffff;
}

/* Encabezado de la tabla */
.solicitud-table thead tr {
    background-color: #007bff; /* Azul brillante para el encabezado */
    color: white;
    text-align: left;
}

.solicitud-table th {
    padding: 15px 20px;
    font-weight: 700;
    font-size: 15px;
    text-transform: uppercase;
}

/* Redondear esquinas del encabezado */
.solicitud-table th:first-child { border-top-left-radius: 10px; }
.solicitud-table th:last-child { border-top-right-radius: 10px; }

/* Celdas del cuerpo de la tabla */
.solicitud-table td {
    padding: 15px 20px;
    border: none; 
    background-color: #f7f9fc; /* Fondo muy claro para las filas */
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05); /* Sombra sutil para separar filas */
    font-size: 14px;
    color: #333;
}

/* Estilo para la primera y Ãºltima celda de la fila para redondear */
.solicitud-table tbody tr td:first-child {
    border-bottom-left-radius: 8px;
    border-top-left-radius: 8px;
    font-weight: 700;
    color: #0056b3; /* Resaltar el aparato */
}
.solicitud-table tbody tr td:last-child {
    border-bottom-right-radius: 8px;
    border-top-right-radius: 8px;
}

/* Estilos de Estado */
.status-confirmada {
    font-weight: 700;
    background-color: #e6f7e6; 
    color: #28a745; /* Verde de Ã©xito */
    text-align: center;
    border-radius: 4px;
    padding: 5px 8px;
}

.status-pendiente {
    font-weight: 700;
    background-color: #fff3cd; 
    color: #856404; /* Naranja/Amarillo de advertencia */
    text-align: center;
    border-radius: 4px;
    padding: 5px 8px;
}

/* Estilos para Mensaje VacÃ­o */
.empty-message {
    padding: 18px;
    background-color: #e3f2fd;
    color: #0056b3;
    border: 1px solid #bbdefb;
    border-radius: 8px;
    margin-top: 30px;
    text-align: center;
    font-weight: 600;
}

/* Estilos de Botones */
.btn-regresar, .btn-logout {
    display: inline-block;
    padding: 10px 20px;
    text-decoration: none;
    border-radius: 8px;
    font-weight: 600;
    transition: background-color 0.2s;
    font-size: 15px;
}

.btn-regresar {
    background-color: #343a40; 
    color: white;
}
.btn-regresar:hover { background-color: #495057; }

.btn-logout {
    background-color: #dc3545; /* Rojo */
    color: white;
    border: none;
    cursor: pointer;
}
.btn-logout:hover { background-color: #c82333; }

</style>

<div class="solicitudes-container">
    <h2>MIS SOLICITUDES</h2>

    {% if servicios_solicitados %}
        <h3>ðŸ“¦ APARATOS Y CITAS REGISTRADAS</h3> 

        <table class="solicitud-table">
            <thead>
                <tr>
                    <th>Aparato</th>
                    <th>Cant.</th>
                    <th>Fecha Solicitud</th>
                    <th>Fecha de Cita</th>
                    <th>Hora de Cita</th>
                    <th>Estado</th>
                </tr>
            </thead>

            <tbody>
               {% for servicio in servicios_solicitados %}
                <tr>
                    <td>
                        {% if servicio.aparato_nombre %}
                            {{ servicio.aparato_nombre }}
                        {% else %}
                            <span style="color: #cc0000; font-weight: bold;">[APARATO NO CAPTURADO]</span>
                        {% endif %}
                    </td>
                    
                    <td>{{ servicio.cantidad|default:"1" }}</td>
                    
                    <td>{{ servicio.fecha_solicitud|date:"d/m/Y H:i" }}</td> 

                    <td>
                        {% if ultima_cita %}
                            {{ ultima_cita.fecha_cita|date:"d/m/Y" }}
                        {% else %}
                            <span style="color: #999; font-style: italic;">Sin agendar</span>
                        {% endif %}
                    </td> 
                    
                    <td>
                        {% if ultima_cita %}
                            {{ ultima_cita.hora_inicio|time:"h:i A" }} - {{ ultima_cita.hora_fin|time:"h:i A" }}
                        {% else %}
                            <span style="color: #999;">-</span>
                        {% endif %}
                    </td>
                    
                    <td>
                        {% if servicio.estado == 'Confirmada' %}
                            <span class="status-confirmada">Confirmada</span>
                        {% else %}
                            <span class="status-pendiente">Pendiente</span>
                        {% endif %}
                    </td> 
                </tr>
                {% endfor %}
            </tbody>
        </table>

    {% else %}
        <div class="empty-message">
            No tienes servicios registrados.
        </div>
    {% endif %}

    <div style="margin-top: 30px; text-align: right;">
        <a href="javascript:history.back()" class="btn-regresar">&larr; Regresar</a>
        <form method="post" action="{% url 'cerrar_sesion' %}" style="display: inline-block; margin-left: 10px;">
            {% csrf_token %}
            <button type="submit" class="btn-logout">Cerrar SesiÃ³n</button>
        </form>
    </div>
</div>
