<style>
/* ... (Estilos CSS Modernos omitidos por brevedad, asumiendo que ya los aplicaste) ... */

.solicitudes-container {
    /* ... */
}

.solicitud-table {
    /* ... */
}

/* Estilo para Aparatos No Definidos */
.aparato-alerta {
    color: #cc0000; /* Rojo */
    font-weight: 700;
    background-color: #ffe0e0; /* Fondo rojo claro */
    padding: 2px 5px;
    border-radius: 4px;
}
</style>

<div class="solicitudes-container">
    <h2>MIS SOLICITUDES</h2>

    {% if servicios_solicitados %}
        <h3>üì¶ APARATOS A REPARAR</h3> 

        <table class="solicitud-table">
            <thead>
                <tr>
                    <th>Aparato</th>
                    <th>Cantidad</th>
                    <th>Fecha de Solicitud</th>
                    <th>Fecha de Cita</th>
                    <th>Hora de Cita</th>
                    <th>Estado</th>
                </tr>
            </thead>

            <tbody>
                {% for servicio in servicios_solicitados %}
                <tr>
                    <td>
                        {% if servicio.nombre_aparato %}
                            {{ servicio.nombre_aparato }}
                        {% else %}
                            <span class="aparato-alerta">‚ùå Sin Aparato Definido (Error DB)</span>
                        {% endif %}
                    </td>
                    
                    <td>{{ servicio.cantidad|default:"-" }}</td>
                    <td>{{ servicio.fecha_solicitud|date:"d/m/Y H:i" }}</td> 

                    <td>{{ servicio.fecha_cita|date:"d/m/Y"|default:"-" }}</td> 
                    
                    <td>
                        {% if servicio.hora_inicio and servicio.hora_fin %}
                            {{ servicio.hora_inicio|time:"H:i" }} - {{ servicio.hora_fin|time:"H:i" }}
                        {% else %}
                            -
                        {% endif %}
                    </td>
                    
                    <td>
                        {% if servicio.estado == 'Pendiente' %}
                            <span style="color: orange; font-weight: bold;">Pendiente</span>
                        {% else %}
                            <span style="color: #28a745; font-weight: bold;">{{ servicio.estado|default:"Confirmada" }}</span>
                        {% endif %}
                    </td> 
                </tr>
                {% endfor %}
            </tbody>
        </table>

    {% else %}
        <div class="empty-message">
            No tienes servicios registrados.
        </div>
    {% endif %}

    <div style="margin-top: 30px; text-align: right;">
        <a href="javascript:history.back()" class="btn-regresar">&larr; Regresar</a>
        <form method="post" action="{% url 'cerrar_sesion' %}" style="display: inline-block; margin-left: 10px;">
            {% csrf_token %}
            <button type="submit" class="btn-logout">Cerrar Sesi√≥n</button>
        </form>
    </div>
</div>
